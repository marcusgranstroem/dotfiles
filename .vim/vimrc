"""""""""""""""""""""""""""""""
"""""        Vimrc       """"""
"""""  Marcus Granstr√∂m  """""" 
"""""""""""""""""""""""""""""""
" Editor
packadd! dracula
colorscheme dracula
set relativenumber
set colorcolumn=80
set cursorline
set splitbelow
set splitright
set showmatch
set termguicolors
syntax on

" Editor remappings
inoremap jj <ESC>
" Window movement
noremap <C-h> <C-w>h
noremap <C-j> <C-w>j
noremap <C-k> <C-w>k
noremap <C-l> <C-w>l
" Enable mouse
set mouse=a
" Clipboard
" TODO
" Change working directory
nnoremap <leader>cd :cd %:p:h<CR>:pwd<CR>
"Tabs
nnoremap <C-Left> :tabprevious<CR>
nnoremap <C-Right> :tabnext<CR>
nnoremap <silent> <A-Left> :execute 'silent! tabmove ' . (tabpagenr()-2)<CR>
nnoremap <silent> <A-Right> :execute 'silent! tabmove ' . (tabpagenr()+1)<CR>

nmap <silent> <F8> :TagbarToggle<CR>
:command! MakeTags !ctags . -R
set tags=./tags;

nmap <F2> :NERDTreeToggle<CR>

" Toggle fugitive Gstatus
function! ToggleGStatus()
    if buflisted(bufname('.git/index'))
        bd .git/index
    else
        Gstatus
    endif
endfunction
command ToggleGStatus :call ToggleGStatus()
nmap <F3> :ToggleGStatus<CR>

"  Indentation
set expandtab       " enter spaces when tab is pressed
set textwidth=120   " break lines when line length increases
set tabstop=4       " use 4 spaces to represent tab
set softtabstop=4
set shiftwidth=4    " number of spaces to use for auto indent
filetype indent on

" make backspaces more powerfull
set backspace=indent,eol,start
au BufNewFile,BufRead *.py
    \ set expandtab       |" replace tabs with spaces
    \ set autoindent      |" copy indent when starting a new line
    \ set tabstop=4
    \ set softtabstop=4
    \ set shiftwidth=4

" Find stuff
" FZF fuzzy finder
" Install from git: 
" git submodule add --depth 1 https://github.com/junegunn/fzf.git ~/.fzf
" ~/.fzf/install
set runtimepath+=~/.vim/plugins/fzf
set runtimepath+=~/.vim/plugins/fzf.vim
nnoremap <C-p> :Files<Cr> " Local search
nnoremap <C-g> :Files ~<Cr> " Search in home
nnoremap <C-f> :Rg<Cr> " Ripgrep

" Install jedi:
" sudo apt-get install vim-python-jedi
" vim-addons install python-jedi 

packloadall
silent! helptags ALL

" Manual instalation
" Ripgrep in ubuntu 18.04
"curl -LO https://github.com/BurntSushi/ripgrep/releases/download/11.0.2/ripgrep_11.0.2_amd64.deb
"sudo dpkg -i ripgrep_11.0.2_amd64.deb
